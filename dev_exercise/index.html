<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.0">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="HydraDX Docs Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="HydraDX Docs Blog Atom Feed"><title data-react-helmet="true">Practical exercise | HydraDX Docs</title><meta data-react-helmet="true" property="og:url" content="https://docs.hydradx.io/dev_exercise"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Practical exercise | HydraDX Docs"><meta data-react-helmet="true" name="description" content="Are you looking to put your Substrate knowledge to the test? Do you think you are ready to get hydrated? Then this small practical exercise might be what you are looking for."><meta data-react-helmet="true" property="og:description" content="Are you looking to put your Substrate knowledge to the test? Do you think you are ready to get hydrated? Then this small practical exercise might be what you are looking for."><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://docs.hydradx.io/dev_exercise"><link data-react-helmet="true" rel="alternate" href="https://docs.hydradx.io/dev_exercise" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://docs.hydradx.io/de/dev_exercise" hreflang="de"><link data-react-helmet="true" rel="alternate" href="https://docs.hydradx.io/ru/dev_exercise" hreflang="ru"><link data-react-helmet="true" rel="alternate" href="https://docs.hydradx.io/es/dev_exercise" hreflang="es"><link data-react-helmet="true" rel="alternate" href="https://docs.hydradx.io/fr/dev_exercise" hreflang="fr"><link data-react-helmet="true" rel="alternate" href="https://docs.hydradx.io/cn/dev_exercise" hreflang="cn"><link data-react-helmet="true" rel="alternate" href="https://docs.hydradx.io/dev_exercise" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.c09fcbad.css">
<link rel="preload" href="/assets/js/runtime~main.ac5de279.js" as="script">
<link rel="preload" href="/assets/js/main.15040842.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="HydraDX logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.svg" alt="HydraDX logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">HydraDX Documentation</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/">Docs</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__item navbar__link"><span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" style="vertical-align:text-bottom;margin-right:5px"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>English</span></span></a><ul class="dropdown__menu"><li><a href="/dev_exercise" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" style="text-transform:capitalize">English</a></li><li><a href="/de/dev_exercise" target="_self" rel="noopener noreferrer" class="dropdown__link" style="text-transform:capitalize">Deutsch</a></li><li><a href="/ru/dev_exercise" target="_self" rel="noopener noreferrer" class="dropdown__link" style="text-transform:capitalize">—Ä—É—Å—Å–∫–∏–π</a></li><li><a href="/es/dev_exercise" target="_self" rel="noopener noreferrer" class="dropdown__link" style="text-transform:capitalize">espa√±ol</a></li><li><a href="/fr/dev_exercise" target="_self" rel="noopener noreferrer" class="dropdown__link" style="text-transform:capitalize">fran√ßais</a></li><li><a href="/cn/dev_exercise" target="_self" rel="noopener noreferrer" class="dropdown__link" style="text-transform:capitalize">‰∏≠Êñá</a></li></ul></div><a href="https://hydradx.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">HydraDX Homepage</a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled" role="button" tabindex="-1"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">üåú</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">üåû</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="HydraDX logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/logo.svg" alt="HydraDX logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">HydraDX Documentation</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/">Docs</a></li><li class="menu__list-item menu__list-item--collapsed"><a href="#" role="button" class="menu__link menu__link--sublist"><span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="20" height="20" style="vertical-align:text-bottom;margin-right:5px"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>Languages</span></span></a><ul class="menu__list"><li class="menu__list-item"><a href="/dev_exercise" target="_self" rel="noopener noreferrer" class="menu__link dropdown__link--active" style="text-transform:capitalize">English</a></li><li class="menu__list-item"><a href="/de/dev_exercise" target="_self" rel="noopener noreferrer" class="menu__link" style="text-transform:capitalize">Deutsch</a></li><li class="menu__list-item"><a href="/ru/dev_exercise" target="_self" rel="noopener noreferrer" class="menu__link" style="text-transform:capitalize">—Ä—É—Å—Å–∫–∏–π</a></li><li class="menu__list-item"><a href="/es/dev_exercise" target="_self" rel="noopener noreferrer" class="menu__link" style="text-transform:capitalize">espa√±ol</a></li><li class="menu__list-item"><a href="/fr/dev_exercise" target="_self" rel="noopener noreferrer" class="menu__link" style="text-transform:capitalize">fran√ßais</a></li><li class="menu__list-item"><a href="/cn/dev_exercise" target="_self" rel="noopener noreferrer" class="menu__link" style="text-transform:capitalize">‰∏≠Êñá</a></li></ul></li><li class="menu__list-item"><a href="https://hydradx.io" target="_blank" rel="noopener noreferrer" class="menu__link">HydraDX Homepage</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><div class="docSidebarContainer_3Kbt" role="complementary"><div class="sidebar_15mo"><div class="menu menu--responsive thin-scrollbar menu_Bmed"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Intro</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/">Intro</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/snakenet">Snakenet</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/new_deal">Contribute and Get Rewarded</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">How-to</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/create_account">Create a new HDX Account</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/claim">Claim your HDX</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/start_nominating">Become a Nominator</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/start_validating">Become a Validator</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/identity">Set your Identity</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/staking_claim_rewards">Claim your Staking Rewards</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/tip_request">Request a Treasury Tip</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/participate_in_referenda">Participate in Referenda</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/participate_in_council_elections">Participate in Council Elections</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Connect to a Node</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/polkadotjs_apps_local">Connect to a Local Node</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/polkadotjs_apps_public">Connect to a Public Node</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Learn</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/staking">Staking</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/staking_rewards">Staking Rewards</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Democracy</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/democracy_intro">Introduction</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/democracy_referenda">Referenda</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/democracy_council">HydraDX Council</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/democracy_technical_committee">Technical Committee</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Maintain</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/node_setup">Set up a Validator Node</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/performance_benchmark">Performance Benchmark</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/node_monitoring">Node Monitoring</a></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Build</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/dev_intro">Intro to Development</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/build_dev_chain">Set up a Development Chain</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/dev_pools">AMM Pools</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/dev_primitives">Primitives Crate</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/dev_math">HydraDX Math Crate</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Pallets</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/dev_pallets">Intro</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/registry">Asset Registry</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/xyk">XYK Pallet</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/dev_pallet_hdx">HDX Pallet</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/dev_pallet_exchange">Exchange</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/dev_pallet_payment">Transaction Multi-Payment</a></li></ul></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/dev_exercise">Practical exercise</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Contribute</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/contributing">Writing Docs</a></li></ul></li></ul></div></div></div><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><header><h1 class="docTitle_3a4h">Practical exercise</h1></header><div class="markdown"><p>Are you looking to put your Substrate knowledge to the test? Do you think you are ready to get hydrated? Then this small practical exercise might be what you are looking for. </p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="task-description"></a>Task description<a class="hash-link" href="#task-description" title="Direct link to heading">#</a></h2><p>Implement a simplified version of a trading pool which holds 2 stable assets and has no trading fees.</p><p>The trading pool should support the following functionality which should be implemented as extrinsics:</p><ul><li>create pool</li><li>add liquidity</li><li>remove liquidity</li><li>sell</li><li>buy</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="math"></a>Math<a class="hash-link" href="#math" title="Direct link to heading">#</a></h2><p>You can find the math-related functionality in the HydraDX-math crate under branch simpleswap:
<a href="https://github.com/galacticcouncil/HydraDX-math/tree/simpleswap" target="_blank" rel="noopener noreferrer">https://github.com/galacticcouncil/HydraDX-math/tree/simpleswap</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="storage"></a>Storage<a class="hash-link" href="#storage" title="Direct link to heading">#</a></h2><p>Design a storage which keeps the pool information. The following information needs to be stored:</p><ul><li>amplification: u128</li><li>assets: AssetId (assets in the pool)</li><li>balances: u128 (balances of each asset in the pool)</li><li>pool asset: AssetId (asset minted or burnt when liquidity is added to or removed from the pool)</li></ul><p>Also consider which type of storage to use and what is the best way to access the pool.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="extrinsics"></a>Extrinsics<a class="hash-link" href="#extrinsics" title="Direct link to heading">#</a></h2><p>Here are some further details on the required extrinsics.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="create-pool"></a>create pool<a class="hash-link" href="#create-pool" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly rust"><div tabindex="0" class="prism-code language-rust codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain"> pub fn create_pool(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    origin: origin,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    assets: (AssetId, AssetId),</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    amplification: Balance) {}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>In the first place, create_pool should check if a pool between the two pairs already exists. If this is not the case, it should create a new pool in the asset registry and store all the necessary information in the storage. You can check the XYK pallet for reference on how to work with the asset registry.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="add-liquidity"></a>add liquidity<a class="hash-link" href="#add-liquidity" title="Direct link to heading">#</a></h3><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly rust"><div tabindex="0" class="prism-code language-rust codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">ub fn add_liquidity(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    origin: OriginFor&lt;T&gt;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    assets: (AssetId,AssetId),</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    amounts: (Balance, Balance),</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    min_mint_amount: Balance,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">) -&gt; DispatchResultWithPostInfo {}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>This extrinsic should add liquidity to the pool, provided that the pool already exists and that the account has a sufficient balance of both assets that are added to the pool.</p><p>You can use <code>calculate_pool_value</code> from the math crate to calculate the amount which should be minted for the user.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly rust"><div tabindex="0" class="prism-code language-rust codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">let d0 = calculate_pool_value([initial amount a, initial amount b], ann);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">let d1 = calculate_pool_value([new amount a, new amount b], ann);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">let supply = total_issuance(pool_asset);</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">let mint_mount = if supply &gt; 0 {</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    supply * ( d1 - d0) / d0</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}else</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">{</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    d1</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="remove_liquidity"></a>remove_liquidity<a class="hash-link" href="#remove_liquidity" title="Direct link to heading">#</a></h3><p>TBD</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="sell--buy"></a>sell / buy<a class="hash-link" href="#sell--buy" title="Direct link to heading">#</a></h3><p>Sell and buy are two very similar extrinsics which change the amount of the assets in the pool - the supply of one asset increases while the supply of the other asset decreases.</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly rust"><div tabindex="0" class="prism-code language-rust codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">pub fn sell(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    origin: OriginFor&lt;T&gt;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    asset_sell: AssetId,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    asset_buy: AssetId,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    amount: Balance,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    min_bought: Balance,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">) -&gt; DispatchResultWithPostInfo {}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly rust"><div tabindex="0" class="prism-code language-rust codeBlock_23N8 thin-scrollbar"><div class="codeBlockLines_39YC" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">pub fn buy(</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    origin: OriginFor&lt;T&gt;,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    asset_buy: AssetId,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    asset_sell: AssetId,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    amount: Balance,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    max_sold: Balance,</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">) -&gt; DispatchResultWithPostInfo {}</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o">Copy</button></div></div><p>Before the sell or buy is effectuated, the methods should perform the necessary validations in order to determine that the transaction can be  completed successfully. If this is the case, it should calculate the amounts in and out, perform the transfers and, finally - update the pool storage.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="exchange-support"></a>Exchange support<a class="hash-link" href="#exchange-support" title="Direct link to heading">#</a></h2><p>As a bonus task, you can prepare your newly created pool to be plugged into the Exchange pallet. For that purpose, an AMM trait from the primitives crate should be implemented for this pallet.</p><p>You can look for inspiration on how this can be done in the XYK pallet.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="questions"></a>Questions<a class="hash-link" href="#questions" title="Direct link to heading">#</a></h2><p>If you have any questions, please feel free to contact us on Discord.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/galacticcouncil/HydraDX-docs/edit/main/docs/dev_exercise.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/dev_pallet_payment"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">¬´ Transaction Multi-Payment</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/contributing"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Writing Docs ¬ª</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#task-description" class="table-of-contents__link">Task description</a></li><li><a href="#math" class="table-of-contents__link">Math</a></li><li><a href="#storage" class="table-of-contents__link">Storage</a></li><li><a href="#extrinsics" class="table-of-contents__link">Extrinsics</a><ul><li><a href="#create-pool" class="table-of-contents__link">create pool</a></li><li><a href="#add-liquidity" class="table-of-contents__link">add liquidity</a></li><li><a href="#remove_liquidity" class="table-of-contents__link">remove_liquidity</a></li><li><a href="#sell--buy" class="table-of-contents__link">sell / buy</a></li></ul></li><li><a href="#exchange-support" class="table-of-contents__link">Exchange support</a></li><li><a href="#questions" class="table-of-contents__link">Questions</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://discord.gg/HDNPFFrcnW" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://twitter.com/hydra_dx" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ¬© 2021 Intergalactic, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.ac5de279.js"></script>
<script src="/assets/js/main.15040842.js"></script>
</body>
</html>